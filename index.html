<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ukulele Tuner</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="ukulele-tuner">
      <div class="labels">
        <span>G</span>
        <span>C</span>
        <span>E</span>
        <span>A</span>
      </div>
      <div class="uke">
        <div class="section" @click="pluckString('g')">
          <div v-for="fret in gFrets" class="fret">
            <div class="string g-string"></div>
          </div>
        </div>
        <div class="section" @click="pluckString('c')">
          <div v-for="fret in cFrets" class="fret">
            <div class="string c-string"></div>
          </div>
        </div>
        <div class="section" @click="pluckString('e')">
          <div v-for="fret in eFrets" class="fret">
            <div class="string e-string"></div>
          </div>
        </div>
        <div class="section" @click="pluckString('a')">
          <div v-for="fret in aFrets" class="fret">
            <div class="string a-string"></div>
          </div>
        </div>
      </div>
    </div>
    <script src="https://unpkg.com/vue"></script>
    <script type="text/javascript">
      const ukuleleTuner = new Vue({
        el: '#ukulele-tuner',
        data: {
          context: new AudioContext(),
          oscillator: null,
          frequencies: {
            'a#': 233.08,
            b: 246.94,
            c: 261.63,
            'c#': 277.18,
            d: 293.66,
            'd#': 311.13,
            e: 329.63,
            f: 349.23,
            'f#': 369.99,
            g: 392,
            'g#': 415.3,
            a: 440
          },
          gFrets: ['g', 'g#', 'a', 'a#'],
          cFrets: ['c', 'c#', 'd', 'd#'],
          eFrets: ['e', 'f', 'f#', 'g'],
          aFrets: ['a', 'a#', 'b', 'c']
        },
        methods: {
          pluckString: function(string) {
            this.oscillator = this.context.createOscillator();
            this.oscillator.frequency.value = this.frequencies[string];
            this.oscillator.connect(this.context.destination);
            this.oscillator.start(this.context.currentTime);
            this.oscillator.stop(this.context.currentTime + 1);
          }
        }
      });
    </script>
  </body>
</html>
